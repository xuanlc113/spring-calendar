[{"C:\\Programming\\Calendar\\client\\src\\index.js":"1","C:\\Programming\\Calendar\\client\\src\\App.js":"2","C:\\Programming\\Calendar\\client\\src\\layout\\Home.js":"3","C:\\Programming\\Calendar\\client\\src\\login\\Login.js":"4","C:\\Programming\\Calendar\\client\\src\\layout\\Navbar.js":"5","C:\\Programming\\Calendar\\client\\src\\layout\\Sidebar.js":"6","C:\\Programming\\Calendar\\client\\src\\layout\\Content.js":"7","C:\\Programming\\Calendar\\client\\src\\schedule\\week\\Week.js":"8","C:\\Programming\\Calendar\\client\\src\\schedule\\day\\Day.js":"9","C:\\Programming\\Calendar\\client\\src\\schedule\\month\\Month.js":"10","C:\\Programming\\Calendar\\client\\src\\schedule\\Header.js":"11","C:\\Programming\\Calendar\\client\\src\\schedule\\Schedule.js":"12","C:\\Programming\\Calendar\\client\\src\\schedule\\Timeline.js":"13","C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthTile.js":"14","C:\\Programming\\Calendar\\client\\src\\schedule\\Event.js":"15","C:\\Programming\\Calendar\\client\\src\\schedule\\Grid.js":"16","C:\\Programming\\Calendar\\client\\src\\event_info\\EventTemplates.js":"17","C:\\Programming\\Calendar\\client\\src\\event_info\\EventHelpers.js":"18","C:\\Programming\\Calendar\\client\\src\\event_info\\EventPopover.js":"19","C:\\Programming\\Calendar\\client\\src\\schedule\\AllDayArea.js":"20","C:\\Programming\\Calendar\\client\\src\\schedule\\AllDayEvent.js":"21","C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthAllDayEvent.js":"22","C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthDayEvent.js":"23","C:\\Programming\\Calendar\\client\\src\\contact\\Contact.js":"24","C:\\Programming\\Calendar\\client\\src\\contact\\AddContact.js":"25","C:\\Programming\\Calendar\\client\\src\\contact\\ContactRequest.js":"26","C:\\Programming\\Calendar\\client\\src\\hooks\\useDatetime.js":"27","C:\\Programming\\Calendar\\client\\src\\hooks\\useCalendarSelector.js":"28","C:\\Programming\\Calendar\\client\\src\\hooks\\useEventEditor.js":"29","C:\\Programming\\Calendar\\client\\src\\hooks\\useCustomRepeat.js":"30","C:\\Programming\\Calendar\\client\\src\\event_info\\EventEditor.js":"31","C:\\Programming\\Calendar\\client\\src\\event_info\\EventRepeat.js":"32"},{"size":499,"mtime":1608615488848,"results":"33","hashOfConfig":"34"},{"size":1250,"mtime":1610850300229,"results":"35","hashOfConfig":"34"},{"size":1733,"mtime":1610857955578,"results":"36","hashOfConfig":"34"},{"size":641,"mtime":1609808842098,"results":"37","hashOfConfig":"34"},{"size":3902,"mtime":1610850480332,"results":"38","hashOfConfig":"34"},{"size":2449,"mtime":1610858093047,"results":"39","hashOfConfig":"34"},{"size":1889,"mtime":1611364455851,"results":"40","hashOfConfig":"34"},{"size":2119,"mtime":1610873572294,"results":"41","hashOfConfig":"34"},{"size":2082,"mtime":1610873573035,"results":"42","hashOfConfig":"34"},{"size":1869,"mtime":1611365647480,"results":"43","hashOfConfig":"34"},{"size":1213,"mtime":1609816510353,"results":"44","hashOfConfig":"34"},{"size":3712,"mtime":1611294603494,"results":"45","hashOfConfig":"34"},{"size":1221,"mtime":1608348922289,"results":"46","hashOfConfig":"34"},{"size":5649,"mtime":1611365638505,"results":"47","hashOfConfig":"34"},{"size":1687,"mtime":1610874098451,"results":"48","hashOfConfig":"34"},{"size":1177,"mtime":1610776662822,"results":"49","hashOfConfig":"34"},{"size":446,"mtime":1611211609496,"results":"50","hashOfConfig":"34"},{"size":2231,"mtime":1610871937762,"results":"51","hashOfConfig":"34"},{"size":6262,"mtime":1611295084868,"results":"52","hashOfConfig":"34"},{"size":3531,"mtime":1611294475068,"results":"53","hashOfConfig":"34"},{"size":2722,"mtime":1611212381459,"results":"54","hashOfConfig":"34"},{"size":2955,"mtime":1611364772402,"results":"55","hashOfConfig":"34"},{"size":790,"mtime":1611364531154,"results":"56","hashOfConfig":"34"},{"size":1118,"mtime":1609722469765,"results":"57","hashOfConfig":"34"},{"size":1999,"mtime":1610588907033,"results":"58","hashOfConfig":"34"},{"size":1085,"mtime":1610590838024,"results":"59","hashOfConfig":"34"},{"size":1099,"mtime":1610843050908,"results":"60","hashOfConfig":"34"},{"size":1846,"mtime":1610850393604,"results":"61","hashOfConfig":"34"},{"size":4784,"mtime":1611211606540,"results":"62","hashOfConfig":"34"},{"size":5039,"mtime":1610844150428,"results":"63","hashOfConfig":"34"},{"size":8820,"mtime":1610872013542,"results":"64","hashOfConfig":"34"},{"size":4864,"mtime":1610844273428,"results":"65","hashOfConfig":"34"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"ezpajk",{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"68"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"68"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"68"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"68"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"68"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"68"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127","usedDeprecatedRules":"68"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"68"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"133","usedDeprecatedRules":"68"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"136","usedDeprecatedRules":"68"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"139","usedDeprecatedRules":"68"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"C:\\Programming\\Calendar\\client\\src\\index.js",[],["142","143"],"C:\\Programming\\Calendar\\client\\src\\App.js",["144"],"import { useAuth0 } from \"@auth0/auth0-react\";\nimport styled from \"styled-components\";\nimport Login from \"./login/Login\";\nimport Home from \"./layout/Home\";\nimport axios from \"axios\";\nimport { createContext, useEffect } from \"react\";\nimport { v5 as uuidv5 } from \"uuid\";\n\nconst Container = styled.div`\n  height: 100%;\n  background-color: #f6f6f6;\n`;\n\nconst UserContext = createContext(null);\n\nfunction App() {\n  const { user, isAuthenticated } = useAuth0();\n  let userId;\n  if (isAuthenticated) {\n    let providerId = user.sub.split(\"|\")[1];\n    userId = uuidv5(providerId, process.env.REACT_APP_UUID_NAMESPACE);\n  }\n\n  useEffect(() => {\n    (async function () {\n      if (isAuthenticated) {\n        try {\n          await axios.get(`/user/${userId}`);\n        } catch (err) {\n          if (err.response.status === 500) {\n            await axios.post(`/user`, {\n              id: userId,\n              email: user.email,\n            });\n          }\n        }\n      }\n    })();\n  }, [user]);\n\n  return (\n    <Container>\n      {isAuthenticated ? (\n        <UserContext.Provider value={userId}>\n          <Home userId={userId} />\n        </UserContext.Provider>\n      ) : (\n        <Login />\n      )}\n    </Container>\n  );\n}\n\nexport { App, UserContext };\n","C:\\Programming\\Calendar\\client\\src\\layout\\Home.js",[],"C:\\Programming\\Calendar\\client\\src\\login\\Login.js",[],"C:\\Programming\\Calendar\\client\\src\\layout\\Navbar.js",["145"],"import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Badge, Select, Space, Popover } from \"antd\";\r\nimport { UserOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport ContactRequest from \"../contact/ContactRequest\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../App\";\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  margin: 1rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst DateNav = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  background: white;\r\n  border-radius: 1rem;\r\n  & > h2 {\r\n    margin: 0;\r\n    padding: 0;\r\n    cursor: default;\r\n  }\r\n\r\n  & > .anticon {\r\n    margin: 0 1rem;\r\n    padding: 5px;\r\n    border-radius: 50%;\r\n  }\r\n\r\n  & > span:hover {\r\n    background-color: #e6e6e6;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst FriendIcon = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n\r\n  &:hover {\r\n    background-color: #e6e6e6;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport default function Navbar(props) {\r\n  const { Option } = Select;\r\n  const { logout } = useAuth0();\r\n  const { requests, acceptRequest, denyRequest } = useRequests();\r\n\r\n  function displayDate() {\r\n    if (props.period !== \"day\") {\r\n      return props.date.format(\"MMMM\");\r\n    }\r\n    return props.date.format(\"D MMMM\");\r\n  }\r\n\r\n  function incrementDate() {\r\n    props.setDate(props.date.add(1, props.period));\r\n  }\r\n\r\n  function decrementDate() {\r\n    props.setDate(props.date.subtract(1, props.period));\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <DateNav>\r\n        <LeftOutlined onClick={decrementDate} />\r\n        <h2>{displayDate()}</h2>\r\n        <RightOutlined onClick={incrementDate} />\r\n      </DateNav>\r\n      <Space size={25} align=\"center\">\r\n        <Select\r\n          defaultValue=\"day\"\r\n          value={props.period}\r\n          onChange={props.setPeriod}\r\n        >\r\n          <Option value=\"day\">Day</Option>\r\n          <Option value=\"week\">Week</Option>\r\n          <Option value=\"month\">Month</Option>\r\n        </Select>\r\n        <Popover\r\n          trigger=\"click\"\r\n          content={\r\n            <ContactRequest\r\n              requests={requests}\r\n              acceptRequest={acceptRequest}\r\n              denyRequest={denyRequest}\r\n            />\r\n          }\r\n        >\r\n          <FriendIcon>\r\n            <Badge count={requests.length} size=\"small\">\r\n              <UserOutlined\r\n                className=\"icon\"\r\n                style={{\r\n                  fontSize: \"1.3rem\",\r\n                }}\r\n              />\r\n            </Badge>\r\n          </FriendIcon>\r\n        </Popover>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"medium\"\r\n          shape=\"round\"\r\n          onClick={() => logout({ returnTo: window.location.origin })}\r\n        >\r\n          Log Out\r\n        </Button>\r\n      </Space>\r\n    </Container>\r\n  );\r\n}\r\n\r\nfunction useRequests() {\r\n  const userId = useContext(UserContext);\r\n  const [requests, setRequests] = useState([]);\r\n\r\n  async function acceptRequest(contactId) {\r\n    try {\r\n      await axios.put(`/contact/${contactId}`);\r\n      await getRequests();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  async function denyRequest(contactId) {\r\n    try {\r\n      await axios.delete(`/contact/${contactId}`);\r\n      await getRequests();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      await getRequests();\r\n    })();\r\n  }, []);\r\n\r\n  async function getRequests() {\r\n    try {\r\n      const { data: requests } = await axios.get(`/contact/requests/${userId}`);\r\n      console.log(requests[0]);\r\n      setRequests(requests);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  return { requests, acceptRequest, denyRequest };\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\layout\\Sidebar.js",["146","147"],"import styled from \"styled-components\";\r\nimport Calendar from \"react-calendar\";\r\nimport { Button } from \"antd\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\nimport { useEffect } from \"react\";\r\nimport Contact from \"../contact/Contact\";\r\nimport Popup, { usePopup } from \"../event_info/EventEditor\";\r\nimport AddContact, { useAddContact } from \"../contact/AddContact\";\r\nimport \"./ReactCalendar.css\";\r\n\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst CreateButton = styled(Button)`\r\n  flex: 1;\r\n  width: 100%;\r\n  margin-bottom: 1rem;\r\n  font-size: 1.2em !important;\r\n`;\r\n\r\nconst DateSelector = styled.div`\r\n  flex: 4;\r\n  background-color: white;\r\n  padding: 0.75em 1em;\r\n  border-radius: 5%;\r\n`;\r\n\r\nconst ContactContainer = styled.div`\r\n  flex: 10;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: white;\r\n  border-radius: 5%;\r\n  padding: 0.75em 1em;\r\n  margin-top: 1rem;\r\n  min-height: 0;\r\n`;\r\nconst ContactHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding-bottom: 0.5em;\r\n  border-bottom: 1px solid lightgrey;\r\n  align-items: center;\r\n  & > h3 {\r\n    margin: 0;\r\n    cursor: pointer;\r\n  }\r\n\r\n  & > .anticon {\r\n    padding: 5px;\r\n    border-radius: 1rem;\r\n    &:hover {\r\n      background: #e6e6e6;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function Sidebar(props) {\r\n  const {\r\n    isAddContactVisible,\r\n    openAddContact,\r\n    closeAddContact,\r\n  } = useAddContact();\r\n\r\n  useEffect(() => {}, [props.date]);\r\n\r\n  return (\r\n    <Container>\r\n      <CreateButton\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        shape=\"round\"\r\n        icon={<PlusOutlined />}\r\n        onClick={() => props.openPopup(\"Create Event\", props.date, null)}\r\n      >\r\n        Create\r\n      </CreateButton>\r\n      <DateSelector>\r\n        <Calendar\r\n          value={props.date.toDate()}\r\n          onChange={(val) => props.setDateOnly(val)}\r\n          showFixedNumberOfWeeks={true}\r\n          locale=\"en-US\"\r\n        />\r\n      </DateSelector>\r\n      <ContactContainer>\r\n        <ContactHeader>\r\n          <h3>Calendars</h3>\r\n          <PlusOutlined onClick={openAddContact} />\r\n        </ContactHeader>\r\n\r\n        <Contact\r\n          calendars={props.calendars}\r\n          updateCalendars={props.updateCalendars}\r\n        />\r\n      </ContactContainer>\r\n      {isAddContactVisible && <AddContact close={closeAddContact} />}\r\n    </Container>\r\n  );\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\layout\\Content.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\week\\Week.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\day\\Day.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\month\\Month.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\Header.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\Schedule.js",["148"],"import { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Grid from \"./Grid\";\r\nimport Event from \"./Event\";\r\nimport dayjs from \"dayjs\";\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst Board = styled.div`\r\n  position: relative;\r\n  width: 95%;\r\n`;\r\n\r\nexport default function Schedule(props) {\r\n  const [events, setEvents] = useState([]);\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      setEvents(await getEvents(props.date, props.calendars));\r\n    })();\r\n  }, [props.calendars, update]);\r\n\r\n  function refresh() {\r\n    setUpdate(!update);\r\n  }\r\n\r\n  function openCursorPopup(event) {\r\n    const height = event.target.offsetTop / 10;\r\n    let date = props.date.startOf(\"day\").add(height * 15, \"minute\");\r\n    props.openPopup(\"Create Event\", date, null);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container onClick={openCursorPopup}>\r\n        <Board>\r\n          {events.map((e) => (\r\n            <Event {...e} openPopup={props.openPopup} refresh={refresh} />\r\n          ))}\r\n        </Board>\r\n        <Grid date={props.date} />\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nasync function getEvents(date, users) {\r\n  let events = [];\r\n  for (let user of users) {\r\n    events = events.concat(await getUserEvents(date, user));\r\n  }\r\n  events.sort((a, b) => a.datetime.diff(b.datetime));\r\n  events = positionEvents(events);\r\n  return events;\r\n}\r\n\r\nasync function getUserEvents(date, user) {\r\n  try {\r\n    const timezoneOffset = new Date().getTimezoneOffset();\r\n    const timestamp = date.startOf(\"d\").subtract(timezoneOffset, \"m\").toJSON();\r\n    const { data } = await axios.get(\r\n      `/event/${user.id}?start=${timestamp}&end=${timestamp}`\r\n    );\r\n    const style = { color: user.color, left: 0, z: 5 };\r\n    for (let item of data) {\r\n      item.style = style;\r\n      item.datetime = dayjs(item.datetime).add(timezoneOffset, \"m\");\r\n      item.canon.datetimeStart = dayjs(item.canon.datetimeStart).add(\r\n        timezoneOffset,\r\n        \"m\"\r\n      );\r\n      item.canon.dateEnd = dayjs(item.canon.dateEnd).add(timezoneOffset, \"m\");\r\n      item.owner = user.id;\r\n    }\r\n    return data;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction positionEvents(events) {\r\n  for (let i = 0; i < events.length; i++) {\r\n    let event = events[i];\r\n    let start = event.datetime.unix();\r\n    let end = getEndUnix(event);\r\n    let top = (getTimeInMinutes(event) / 15) * 10;\r\n    let height = (event.canon.duration / 15) * 10;\r\n    let prev = 0;\r\n    let next = 0;\r\n    let j = i - 1;\r\n    let k = i + 1;\r\n    while (j >= 0 && getEndUnix(events[j]) > start) {\r\n      prev++;\r\n      j--;\r\n    }\r\n    while (k < events.length && events[k].datetime.unix() < end) {\r\n      next++;\r\n      k++;\r\n    }\r\n    let left =\r\n      prev > 0\r\n        ? events[j + 1].style.left > 0\r\n          ? 0\r\n          : (100 / (prev + next + 1)) * prev\r\n        : 0;\r\n    if (prev > 0) {\r\n      if (events[j + 1].style.left > 0) {\r\n        prev = 0;\r\n      }\r\n    }\r\n    let width =\r\n      next === 0\r\n        ? prev === 0\r\n          ? 100\r\n          : 100 / (prev + 1)\r\n        : (17 / 20) * (2 / (prev + next + 1)) * 100;\r\n\r\n    let z = prev === 0 ? 5 : events[j + 1].style.z + 1;\r\n\r\n    event.style = {\r\n      ...event.style,\r\n      top,\r\n      height,\r\n      left,\r\n      width,\r\n      z,\r\n    };\r\n  }\r\n  return events;\r\n}\r\n\r\nfunction getEndUnix(event) {\r\n  return event.canon.datetimeStart.unix() + event.canon.duration * 60;\r\n}\r\n\r\nfunction getTimeInMinutes(event) {\r\n  const datetime = event.canon.datetimeStart;\r\n  return (datetime.unix() - datetime.startOf(\"day\").unix()) / 60;\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\schedule\\Timeline.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthTile.js",["149","150"],"C:\\Programming\\Calendar\\client\\src\\schedule\\Event.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\Grid.js",[],"C:\\Programming\\Calendar\\client\\src\\event_info\\EventTemplates.js",[],"C:\\Programming\\Calendar\\client\\src\\event_info\\EventHelpers.js",["151"],"import { Select } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { Option } = Select;\r\n\r\nexport function getDefaultRRules(date, option) {\r\n  console.log(date);\r\n  switch (option) {\r\n    case \"daily\":\r\n      return \"FREQ=DAILY;INTERVAL=1\";\r\n    case \"weekly\":\r\n      return `FREQ=WEEKLY;BYDAY=${getWeekAbbr(date)};INTERVAL=1`;\r\n    case \"monthly\":\r\n      return `FREQ=MONTHLY;BYSETPOS=${Math.ceil(\r\n        date.date() / 7\r\n      )};BYDAY=${getWeekAbbr(date)};INTERVAL=1`;\r\n\r\n    case \"monthly-last\":\r\n      return `FREQ=MONTHLY;BYSETPOS=-1;BYDAY=${getWeekAbbr(date)};INTERVAL=1`;\r\n\r\n    case \"annually\":\r\n      return `FREQ=YEARLY;BYMONTH=${\r\n        date.month() + 1\r\n      };BYMONTHDAY=${date.date()};INTERVAL=1`;\r\n  }\r\n}\r\n\r\nexport function getMonthOptions(date) {\r\n  const week = Math.ceil(date.date() / 7);\r\n  const lastdate = date.endOf(\"month\").date();\r\n  while (lastdate - 7 >= date.date()) {\r\n    date = date.add(7, \"day\");\r\n  }\r\n  const last = Math.ceil(date.date() / 7);\r\n  if (week === last) {\r\n    if (week === 4) {\r\n      return (\r\n        <>\r\n          <Option value=\"monthly\">\r\n            Monthly on the Fourth {getWeekday(date)}\r\n          </Option>\r\n          <Option value=\"monthly-last\">\r\n            Monthly on the Last {getWeekday(date)}\r\n          </Option>\r\n        </>\r\n      );\r\n    } else if (week === 5) {\r\n      return (\r\n        <Option value=\"monthly-last\">\r\n          Monthly on the Last {getWeekday(date)}\r\n        </Option>\r\n      );\r\n    }\r\n  }\r\n  return (\r\n    <Option value=\"monthly\">\r\n      Monthly on the {weekNumber[week - 1]} {getWeekday(date)}\r\n    </Option>\r\n  );\r\n}\r\n\r\nexport function getWeekday(date) {\r\n  return weekdays[date.day()];\r\n}\r\n\r\nfunction getWeekAbbr(date) {\r\n  return weekdayAbbr[date.day()];\r\n}\r\n\r\nexport function getStartTime(datetime) {\r\n  return dayjs(datetime).format(\"h:mma\");\r\n}\r\n\r\nexport function getEndTime(datetime, duration) {\r\n  return dayjs(datetime).add(duration, \"minute\").format(\"h:mma\");\r\n}\r\n\r\nconst weekdays = [\r\n  \"Sunday\",\r\n  \"Monday\",\r\n  \"Tuesday\",\r\n  \"Wednesday\",\r\n  \"Thursday\",\r\n  \"Friday\",\r\n  \"Saturday\",\r\n];\r\n\r\nconst weekNumber = [\"First\", \"Second\", \"Third\", \"Fourth\", \"Last\"];\r\n\r\nconst weekdayAbbr = [\"SU\", \"MO\", \"TU\", \"WE\", \"TH\", \"FR\", \"SA\"];\r\n","C:\\Programming\\Calendar\\client\\src\\event_info\\EventPopover.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\AllDayArea.js",["152"],"import { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Row, Col } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport AllDayEvent from \"./AllDayEvent\";\r\nimport axios from \"axios\";\r\n\r\nconst Grid = styled.div`\r\n  background-image: linear-gradient(to right, lightgrey 0.5px, transparent 1px);\r\n  background-size: ${(props) =>\r\n    props.type === \"week\"\r\n      ? `${100 / 7}% auto`\r\n      : `${100 / props.calendars}% auto`};\r\n`;\r\n\r\nexport default function AllDayArea(props) {\r\n  const { events, refresh } = useAllDay(\r\n    props.type,\r\n    props.calendars,\r\n    props.dates\r\n  );\r\n\r\n  function displayAllDayEvents() {\r\n    if (props.type === \"day\") {\r\n      return DayEvents();\r\n    }\r\n    return WeekEvents();\r\n  }\r\n\r\n  function DayEvents() {\r\n    const position = [];\r\n    for (let i = 0; i < events.length; i++) {\r\n      position.push(\r\n        <Col flex={1 / events.length}>\r\n          {events[i].map((event) => (\r\n            <AllDayEvent\r\n              type=\"day\"\r\n              event={event}\r\n              dateRange={props.dates}\r\n              openPopup={props.openPopup}\r\n              refresh={refresh}\r\n            />\r\n          ))}\r\n        </Col>\r\n      );\r\n    }\r\n    return <Row justify=\"space-around\">{position}</Row>;\r\n  }\r\n\r\n  function WeekEvents() {\r\n    events.sort((a, b) => a.datetime.diff(b.datetime));\r\n    return events.map((event) => (\r\n      <AllDayEvent\r\n        type=\"week\"\r\n        event={event}\r\n        dateRange={props.dates}\r\n        openPopup={props.openPopup}\r\n        refresh={refresh}\r\n      />\r\n    ));\r\n  }\r\n\r\n  return (\r\n    <div style={{ overflowY: \"scroll\" }}>\r\n      <Grid type={props.type} calendars={props.calendars.length}>\r\n        {displayAllDayEvents()}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction useAllDay(period, calendars, dates) {\r\n  const [events, setEvents] = useState([]);\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      setEvents(await getAllDayEvents(period, calendars, dates));\r\n    })();\r\n  }, [calendars, update]);\r\n\r\n  function refresh() {\r\n    setUpdate(!update);\r\n  }\r\n\r\n  return { events, refresh };\r\n}\r\n\r\nasync function getAllDayEvents(period, calendars, dates) {\r\n  let events = [];\r\n  for (let i = 0; i < calendars.length; i++) {\r\n    if (period === \"day\") {\r\n      let calendarEvents = await getCalendarAllDayEvents(calendars[i], dates);\r\n      events.push(calendarEvents);\r\n    } else {\r\n      events = events.concat(\r\n        await getCalendarAllDayEvents(calendars[i], dates)\r\n      );\r\n    }\r\n  }\r\n\r\n  return events;\r\n}\r\n\r\nasync function getCalendarAllDayEvents(calendar, dates) {\r\n  try {\r\n    const timezoneOffset = new Date().getTimezoneOffset();\r\n    const start = dates[0].startOf(\"d\").subtract(timezoneOffset, \"m\").toJSON();\r\n    const end = dates\r\n      .slice(-1)[0]\r\n      .startOf(\"d\")\r\n      .subtract(timezoneOffset, \"m\")\r\n      .toJSON();\r\n    const { data } = await axios.get(\r\n      `/event/allday/${calendar.id}?start=${start}&end=${end}`\r\n    );\r\n    const style = { color: calendar.color };\r\n    for (let item of data) {\r\n      item.style = style;\r\n      item.datetime = dayjs(item.datetime).add(timezoneOffset, \"m\");\r\n      item.canon.datetimeStart = dayjs(item.canon.datetimeStart).add(\r\n        timezoneOffset,\r\n        \"m\"\r\n      );\r\n      item.canon.dateEnd = dayjs(item.canon.dateEnd).add(timezoneOffset, \"m\");\r\n      item.owner = calendar.id;\r\n    }\r\n    return data;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return [];\r\n  }\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\schedule\\AllDayEvent.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthAllDayEvent.js",[],"C:\\Programming\\Calendar\\client\\src\\schedule\\month\\MonthDayEvent.js",[],"C:\\Programming\\Calendar\\client\\src\\contact\\Contact.js",[],"C:\\Programming\\Calendar\\client\\src\\contact\\AddContact.js",[],"C:\\Programming\\Calendar\\client\\src\\contact\\ContactRequest.js",[],"C:\\Programming\\Calendar\\client\\src\\hooks\\useDatetime.js",["153"],"import { useEffect, useRef, useState } from \"react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function useDatetime() {\r\n  const [date, setDate] = useState(roundDate());\r\n  const first = useRef(true);\r\n\r\n  function roundDate() {\r\n    let date = dayjs();\r\n    const time = Math.floor(date.minute() / 5);\r\n    date = date.minute(5 * time).second(0);\r\n    return date;\r\n  }\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (first.current) {\r\n      const diff = date.add(5, \"minute\").diff(dayjs(), \"second\");\r\n      timer = setTimeout(() => {\r\n        incrementTime();\r\n      }, diff * 1000);\r\n      first.current = false;\r\n    } else {\r\n      timer = setInterval(() => {\r\n        incrementTime();\r\n      }, 5 * 60 * 1000);\r\n    }\r\n    return () => clearInterval(timer);\r\n  }, [date]);\r\n\r\n  function incrementTime() {\r\n    setDate(date.minute(date.minute() + 5));\r\n  }\r\n\r\n  function setDateOnly(dateObj) {\r\n    setDate(\r\n      date\r\n        .year(dateObj.getFullYear())\r\n        .month(dateObj.getMonth())\r\n        .date(dateObj.getDate())\r\n    );\r\n  }\r\n\r\n  return { date, setDate, setDateOnly };\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\hooks\\useCalendarSelector.js",["154"],"import { useEffect, useRef, useState } from \"react\";\r\nimport randomColor from \"randomcolor\";\r\nimport axios from \"axios\";\r\n\r\nexport default function useCalendarSelector(userId) {\r\n  const activeCalendars = useRef(null);\r\n  const [calendars, setCalendars] = useState(getCalendars(userId));\r\n  activeCalendars.current = calendars.filter((i) => i.checked);\r\n\r\n  function getCalendars(userId) {\r\n    return [\r\n      { label: \"My Calendar\", id: userId, checked: true, color: \"#3495eb\" },\r\n    ];\r\n  }\r\n\r\n  function updateCalendars(label) {\r\n    if (\r\n      calendars.filter((i) => i.checked).length === 1 &&\r\n      getCalendar(label).checked\r\n    ) {\r\n      return;\r\n    }\r\n    setCalendars(\r\n      calendars.map((i) =>\r\n        i.label === label ? { ...i, checked: !i.checked } : i\r\n      )\r\n    );\r\n  }\r\n\r\n  function getCalendar(label) {\r\n    for (let i = 0; i < calendars.length; i++) {\r\n      if (calendars[i].label === label) {\r\n        return calendars[i];\r\n      }\r\n    }\r\n    return {};\r\n  }\r\n\r\n  useEffect(() => {\r\n    const colors = randomColor({ seed: 4744, luminosity: \"dark\", count: 5 });\r\n    let calendars = [\r\n      { label: \"My Calendar\", id: userId, checked: true, color: \"#3495eb\" },\r\n    ];\r\n    (async function () {\r\n      try {\r\n        const { data: contacts } = await axios.get(\r\n          `/contact/authorized/${userId}`\r\n        );\r\n        calendars = calendars.concat(\r\n          contacts.map((contact, i) => ({\r\n            label: contact.receiver.email,\r\n            id: contact.receiver.id,\r\n            checked: false,\r\n            color: colors[i],\r\n          }))\r\n        );\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    })();\r\n    setCalendars(calendars);\r\n    activeCalendars.current = calendars.filter((i) => i.checked);\r\n  }, []);\r\n\r\n  return { calendars, updateCalendars, activeCalendars };\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\hooks\\useEventEditor.js",["155","156","157","158"],"import { useState, useReducer, useEffect, useContext } from \"react\";\r\nimport RRule, { rrulestr } from \"rrule\";\r\nimport { UserContext } from \"../App\";\r\nimport {\r\n  getDurationTemplate,\r\n  getEventTemplate,\r\n} from \"../event_info/EventTemplates\";\r\n\r\nexport function useEventEditor(datetime, event) {\r\n  const userId = useContext(UserContext);\r\n  const [info, infoDispatch] = useReducer(\r\n    infoReducer,\r\n    getEventInfo(datetime, event, userId)\r\n  );\r\n  const [duration, setDuration] = useState(getEventDuration(datetime, event));\r\n  const [repeatLabel, setRepeatLabel] = useState(getRepeatValue(info.rrule));\r\n\r\n  useEffect(() => {\r\n    setDuration(getEventDuration(datetime, event));\r\n    infoDispatch({ type: \"new\", value: getEventInfo(datetime, event, userId) });\r\n  }, [datetime, JSON.stringify(event)]);\r\n\r\n  function toggleAllDay(e) {\r\n    if (info.isAllDay) {\r\n      infoDispatch({ type: \"start\", value: duration.datetimeStart });\r\n      infoDispatch({ type: \"duration\", value: duration.durationMin });\r\n    } else {\r\n      infoDispatch({ type: \"start\", value: duration.allDayStart });\r\n      infoDispatch({ type: \"duration\", value: duration.durationDay });\r\n    }\r\n    infoDispatch({ type: \"allDay\", value: e.target.checked });\r\n  }\r\n\r\n  function setDateRange(dateRange) {\r\n    const durationDay = getDuration(dateRange, \"day\");\r\n    infoDispatch({ type: \"start\", value: dateRange[0] });\r\n    infoDispatch({ type: \"duration\", value: durationDay });\r\n    setDuration({ ...duration, allDayStart: dateRange[0], durationDay });\r\n  }\r\n\r\n  function setSingleDate(date) {\r\n    infoDispatch({ type: \"start\", value: date });\r\n    setDuration({ ...duration, datetimeStart: date });\r\n  }\r\n\r\n  function setTimeRange(timeRange) {\r\n    const durationMin = getDuration(timeRange, \"minute\");\r\n    infoDispatch({ type: \"duration\", value: durationMin });\r\n    const hour = timeRange[0].hour();\r\n    const min = timeRange[0].minute();\r\n    const datetimeStart = duration.datetimeStart.hour(hour).minute(min);\r\n    setDuration({ ...duration, datetimeStart, durationMin });\r\n    infoDispatch({ type: \"start\", value: datetimeStart });\r\n  }\r\n\r\n  useEffect(() => {\r\n    setRepeatLabel(getRepeatValue(info.rrule));\r\n  }, [info.rrule]);\r\n\r\n  return {\r\n    info,\r\n    infoDispatch,\r\n    duration,\r\n    toggleAllDay,\r\n    setDateRange,\r\n    setSingleDate,\r\n    setTimeRange,\r\n    repeatLabel,\r\n  };\r\n}\r\n\r\nfunction infoReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"title\":\r\n      return { ...state, title: action.value };\r\n    case \"description\":\r\n      return { ...state, description: action.value };\r\n    case \"attendees\":\r\n      return { ...state, attendees: action.value };\r\n    case \"allDay\":\r\n      return { ...state, allDay: action.value };\r\n    case \"start\":\r\n      return { ...state, datetimeStart: action.value };\r\n    case \"end\":\r\n      return { ...state, dateEnd: action.value };\r\n    case \"duration\":\r\n      return { ...state, duration: action.value };\r\n    case \"recurring\":\r\n      return { ...state, recurring: action.value };\r\n    case \"rrule\":\r\n      return { ...state, rrule: action.value };\r\n    case \"new\":\r\n      return action.value;\r\n  }\r\n}\r\n\r\nfunction getEventInfo(datetime, event, userId) {\r\n  if (event) {\r\n    return event;\r\n  }\r\n  const round = Math.ceil(datetime.minute() / 15);\r\n  const template = getEventTemplate(userId);\r\n  template.datetimeStart = datetime.minute(round * 15);\r\n  console.log(template);\r\n  return template;\r\n}\r\n\r\nfunction getEventDuration(datetime, event) {\r\n  let template = getDurationTemplate(datetime);\r\n  if (event) {\r\n    if (event.allDay) {\r\n      template.durationDay = event.duration;\r\n    } else {\r\n      template.durationMin = event.duration;\r\n    }\r\n    return template;\r\n  }\r\n\r\n  const round = Math.ceil(datetime.minute() / 15);\r\n  template.datetimeStart = datetime.minute(round * 15);\r\n  return template;\r\n}\r\n\r\nexport function getDuration(dates, type) {\r\n  return dates[1].diff(dates[0], type);\r\n}\r\n\r\nexport function getRepeatValue(rrule) {\r\n  if (rrule === \"\") {\r\n    return \"none\";\r\n  }\r\n  let text = rrulestr(rrule).toText();\r\n  text = text\r\n    .replace(\"every day \", \"Daily \")\r\n    .replace(\"every week \", \"Weekly \")\r\n    .replace(\"every month \", \"Monthly \")\r\n    .replace(\"every year \", \"Annually \")\r\n    .replace(\"every\", \"Every\");\r\n\r\n  let options = RRule.parseString(rrule);\r\n  if (options.bysetpos) {\r\n    text = text.replace(\"on \", `on the ${getPosition(options.bysetpos)} `);\r\n  }\r\n\r\n  if (text.length > 50) {\r\n    return text.substr(0, 50) + \"...\";\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nfunction getPosition(i) {\r\n  switch (i) {\r\n    case -1:\r\n      return \"Last\";\r\n    case 1:\r\n      return \"First\";\r\n    case 2:\r\n      return \"Second\";\r\n    case 3:\r\n      return \"Third\";\r\n    case 4:\r\n      return \"Fourth\";\r\n  }\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\hooks\\useCustomRepeat.js",["159","160","161","162","163"],"import { useState, useReducer } from \"react\";\r\nimport RRule from \"rrule\";\r\n\r\nexport default function useCustomRepeat(rrule, date) {\r\n  const [options, optionsDispatch] = useReducer(\r\n    optionsReducer,\r\n    parseRRule(rrule, date)\r\n  );\r\n  const [count, setCount] = useState(5);\r\n  const [until, setUntil] = useState(date);\r\n\r\n  function changePeriod(period, date) {\r\n    optionsDispatch({\r\n      type: \"custom\",\r\n      value: getDefaultPeriodOptions(period, date),\r\n    });\r\n  }\r\n\r\n  function isWeekdaySelected(weekday) {\r\n    return options.byweekday.includes(weekday);\r\n  }\r\n\r\n  function toggleWeekday(weekday) {\r\n    if (options.byweekday.includes(weekday)) {\r\n      if (options.byweekday.length > 1) {\r\n        const weekdays = options.byweekday.filter((i) => i != weekday);\r\n        optionsDispatch({ type: \"byweekday\", value: weekdays });\r\n      }\r\n    } else {\r\n      let weekdays = options.byweekday;\r\n      weekdays.push(weekday);\r\n      weekdays.sort();\r\n      optionsDispatch({ type: \"byweekday\", value: options.byweekday });\r\n    }\r\n  }\r\n\r\n  function changeMonthRepeat(type, date) {\r\n    optionsDispatch({\r\n      type: \"custom\",\r\n      value: getMonthRepeatOptions(type, date),\r\n    });\r\n  }\r\n\r\n  function getMonthValue() {\r\n    if (options.bymonthday) {\r\n      return \"monthly-date\";\r\n    }\r\n    if (options.bysetpos === -1) {\r\n      return \"monthly-last\";\r\n    }\r\n    return \"monthly\";\r\n  }\r\n\r\n  function getEnd() {\r\n    if (options.count) {\r\n      return 3;\r\n    }\r\n    if (options.until) {\r\n      return 2;\r\n    }\r\n    return 1;\r\n  }\r\n\r\n  function setEnd(value) {\r\n    switch (value) {\r\n      case 1:\r\n        setRepeatForever();\r\n        break;\r\n      case 2:\r\n        setRepeatUntil();\r\n        break;\r\n      case 3:\r\n        setRepeatCount();\r\n        break;\r\n    }\r\n  }\r\n\r\n  function setRepeatForever() {\r\n    optionsDispatch({ type: \"count\", value: 0 });\r\n    optionsDispatch({ type: \"until\", value: null });\r\n  }\r\n\r\n  function setRepeatUntil() {\r\n    optionsDispatch({ type: \"count\", value: 0 });\r\n    optionsDispatch({ type: \"until\", value: until.toDate() });\r\n  }\r\n\r\n  function setRepeatCount() {\r\n    optionsDispatch({ type: \"until\", value: null });\r\n    optionsDispatch({ type: \"count\", value: count });\r\n  }\r\n\r\n  function changeCount(num) {\r\n    setCount(num);\r\n    optionsDispatch({ type: \"count\", value: num });\r\n  }\r\n\r\n  function changeUntil(date) {\r\n    setUntil(date);\r\n    optionsDispatch({ type: \"until\", value: date.toDate() });\r\n  }\r\n\r\n  return {\r\n    options,\r\n    optionsDispatch,\r\n    changePeriod,\r\n    isWeekdaySelected,\r\n    toggleWeekday,\r\n    changeMonthRepeat,\r\n    getMonthValue,\r\n    getEnd,\r\n    setEnd,\r\n    count,\r\n    changeCount,\r\n    until,\r\n    changeUntil,\r\n  };\r\n}\r\n\r\nfunction optionsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"interval\":\r\n      return { ...state, interval: action.value };\r\n    case \"until\": {\r\n      if (action.value) {\r\n        return { ...state, until: action.value };\r\n      }\r\n      const { until, ...newState } = state;\r\n      return newState;\r\n    }\r\n    case \"count\": {\r\n      if (action.value) {\r\n        return { ...state, count: action.value };\r\n      }\r\n      const { count, ...newState } = state;\r\n      return newState;\r\n    }\r\n    case \"byweekday\":\r\n      return { ...state, byweekday: action.value };\r\n    case \"custom\": {\r\n      const { dtstart, count, until } = state;\r\n      const newState = { ...action.value, dtstart, until, count };\r\n      Object.keys(newState).forEach((key) =>\r\n        newState[key] === undefined ? delete newState[key] : {}\r\n      );\r\n      return newState;\r\n    }\r\n  }\r\n}\r\n\r\nfunction parseRRule(rrule, date) {\r\n  if (rrule) {\r\n    const options = RRule.parseString(rrule);\r\n    if (options.byweekday) {\r\n      options.byweekday = options.byweekday.map((i) => i.weekday);\r\n    }\r\n    return options;\r\n  }\r\n  return { freq: 3, interval: 1, dtstart: date.toDate() };\r\n}\r\n\r\nfunction getDefaultPeriodOptions(val, date) {\r\n  switch (val) {\r\n    case 0:\r\n      return {\r\n        freq: 0,\r\n        interval: 1,\r\n        bymonth: date.month() + 1,\r\n        bymonthday: date.date(),\r\n      };\r\n    case 1:\r\n      return {\r\n        freq: 1,\r\n        interval: 1,\r\n        bymonthday: date.date(),\r\n      };\r\n    case 2:\r\n      let day = date.day() === 0 ? 6 : date.day() - 1;\r\n      return {\r\n        freq: 2,\r\n        interval: 1,\r\n        byweekday: [day],\r\n      };\r\n    case 3:\r\n      return {\r\n        freq: 3,\r\n        interval: 1,\r\n      };\r\n  }\r\n}\r\n\r\nfunction getMonthRepeatOptions(type, date) {\r\n  let day = date.day() === 0 ? 6 : date.day() - 1;\r\n  switch (type) {\r\n    case \"monthly-date\":\r\n      return {\r\n        freq: 1,\r\n        interval: 1,\r\n        bymonthday: date.date(),\r\n      };\r\n    case \"monthly-last\":\r\n      return {\r\n        freq: 1,\r\n        interval: 1,\r\n        byweekday: [day],\r\n        bysetpos: -1,\r\n      };\r\n    case \"monthly\":\r\n      return {\r\n        freq: 1,\r\n        interval: 1,\r\n        byweekday: [day],\r\n        bysetpos: Math.ceil(date.date() / 7),\r\n      };\r\n  }\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\event_info\\EventEditor.js",["164"],"import styled from \"styled-components\";\r\nimport { useEffect, useState } from \"react\";\r\nimport {\r\n  Modal,\r\n  Space,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  TimePicker,\r\n  Checkbox,\r\n  Button,\r\n} from \"antd\";\r\nimport { useEventEditor } from \"../hooks/useEventEditor\";\r\nimport { getDefaultRRules, getMonthOptions, getWeekday } from \"./EventHelpers\";\r\nimport { CloseOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport axios from \"axios\";\r\nimport EventRepeat, { useCustomRepeatPopup } from \"./EventRepeat\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst PopupContainer = styled(Modal)`\r\n  top: 50px;\r\n  .ant-modal-content {\r\n    border-radius: 10px !important;\r\n    .ant-modal-header {\r\n      border-radius: 10px !important;\r\n    }\r\n    .ant-modal-footer > button {\r\n      border-radius: 5px !important;\r\n    }\r\n  }\r\n`;\r\n\r\nconst FullSpace = styled(Space)`\r\n  width: 100%;\r\n`;\r\n\r\nconst DateContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst AttendeeList = styled.div`\r\n  margin: 0 1rem;\r\n  max-height: 6rem;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst AttendeeTag = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  & > p {\r\n    margin: 0;\r\n  }\r\n`;\r\n\r\nconst { TextArea, Search } = Input;\r\nconst { RangePicker: DateRangePicker } = DatePicker;\r\nconst { RangePicker: TimeRangePicker } = TimePicker;\r\nconst { Option } = Select;\r\n\r\nexport default function EventEditor(props) {\r\n  console.log(props);\r\n  const {\r\n    info,\r\n    infoDispatch,\r\n    duration,\r\n    toggleAllDay,\r\n    setDateRange,\r\n    setSingleDate,\r\n    setTimeRange,\r\n    repeatLabel,\r\n  } = useEventEditor(props.date, props.event);\r\n  const { isVisible, openPopup, closePopup, okPopup } = useCustomRepeatPopup(\r\n    info.start,\r\n    infoDispatch\r\n  );\r\n  const {\r\n    attendees,\r\n    input,\r\n    error,\r\n    setInput,\r\n    addAttendee,\r\n    removeAttendee,\r\n  } = useAttendees(info, infoDispatch);\r\n\r\n  function setRepeat(value) {\r\n    if (value === \"custom\") {\r\n      openPopup();\r\n    } else if (value === \"none\") {\r\n      infoDispatch({ type: \"recurring\", value: false });\r\n      infoDispatch({ type: \"rrule\", value: \"\" });\r\n    } else {\r\n      let rrule = getDefaultRRules(info.datetimeStart, value);\r\n      infoDispatch({ type: \"recurring\", value: true });\r\n      infoDispatch({ type: \"rrule\", value: rrule });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PopupContainer\r\n        visible={props.visible}\r\n        onOk={() => props.okPopup(info)}\r\n        onCancel={props.closePopup}\r\n        title={props.title}\r\n      >\r\n        <FullSpace direction=\"vertical\" size=\"middle\">\r\n          <Input\r\n            placeholder=\"Add Title\"\r\n            value={info.title}\r\n            onChange={(e) =>\r\n              infoDispatch({ type: \"title\", value: e.target.value })\r\n            }\r\n          />\r\n          <TextArea\r\n            autoSize={{ minRows: 1, maxRows: 2 }}\r\n            placeholder=\"Add Description\"\r\n            value={info.description}\r\n            onChange={(e) =>\r\n              infoDispatch({ type: \"description\", value: e.target.value })\r\n            }\r\n          />\r\n          <Search\r\n            placeholder=\"Add Participants...\"\r\n            allowClear\r\n            enterButton={<PlusOutlined />}\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onSearch={addAttendee}\r\n          />\r\n          {error && <p style={{ color: \"red\" }}>Cannot find calender</p>}\r\n          {attendees.length > 0 && (\r\n            <AttendeeList>\r\n              {attendees.map((a) => (\r\n                <AttendeeTag>\r\n                  <p>{a.email}</p>\r\n                  <Button\r\n                    type=\"text\"\r\n                    icon={<CloseOutlined style={{ fontSize: \"0.8em\" }} />}\r\n                    onClick={() => removeAttendee(a.email)}\r\n                  />\r\n                </AttendeeTag>\r\n              ))}\r\n            </AttendeeList>\r\n          )}\r\n          <DateContainer>\r\n            {info.allDay ? (\r\n              <DateRangePicker\r\n                allowClear={false}\r\n                value={getDates(duration.allDayStart, duration.durationDay)}\r\n                onChange={setDateRange}\r\n              />\r\n            ) : (\r\n              <>\r\n                <DatePicker\r\n                  allowClear={false}\r\n                  value={duration.datetimeStart}\r\n                  onChange={setSingleDate}\r\n                />\r\n                <TimeRangePicker\r\n                  allowClear={false}\r\n                  value={getTime(duration.datetimeStart, duration.durationMin)}\r\n                  minuteStep={15}\r\n                  format=\"h:mm a\"\r\n                  onChange={setTimeRange}\r\n                />\r\n              </>\r\n            )}\r\n          </DateContainer>\r\n          <Space direction=\"horizontal\" size=\"middle\">\r\n            <Select\r\n              value={repeatLabel}\r\n              onChange={setRepeat}\r\n              dropdownStyle={{ minWidth: \"25%\" }}\r\n              style={{ width: \"100%\" }}\r\n            >\r\n              <Option value=\"none\">No Repeat</Option>\r\n              <Option value=\"daily\">Daily</Option>\r\n              <Option value=\"weekly\">\r\n                Weekly on {getWeekday(info.datetimeStart)}\r\n              </Option>\r\n              {getMonthOptions(info.datetimeStart)}\r\n              <Option value=\"annually\">Annually</Option>\r\n              <Option value=\"custom\">Custom</Option>\r\n            </Select>\r\n            <Checkbox checked={info.allDay} onChange={toggleAllDay}>\r\n              All Day\r\n            </Checkbox>\r\n          </Space>\r\n        </FullSpace>\r\n      </PopupContainer>\r\n      {isVisible && (\r\n        <EventRepeat\r\n          cancelPopup={closePopup}\r\n          okPopup={okPopup}\r\n          rrule={info.rrule}\r\n          infoDispatch={infoDispatch}\r\n          date={info.datetimeStart}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction getTime(datetime, duration) {\r\n  return [datetime, datetime.add(duration, \"minute\")];\r\n}\r\n\r\nfunction getDates(datetime, duration) {\r\n  return [datetime, datetime.add(duration, \"day\")];\r\n}\r\n\r\nexport function usePopup() {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [eventInfo, setEventInfo] = useState({\r\n    title: \"\",\r\n    date: dayjs(),\r\n    event: null,\r\n  });\r\n  const [open, setOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (eventInfo.title !== \"\") {\r\n      setIsVisible(true);\r\n    }\r\n  }, [open]);\r\n\r\n  function openPopup(title, infoDate, infoEvent) {\r\n    setEventInfo({ title, date: infoDate, event: infoEvent });\r\n    setOpen(!open);\r\n  }\r\n\r\n  function closePopup(e) {\r\n    e.stopPropagation();\r\n    setIsVisible(false);\r\n  }\r\n\r\n  async function okPopup(info) {\r\n    let payload = parseInfo({ ...info });\r\n    const canonId = payload.id;\r\n    delete payload.id;\r\n    console.log(payload);\r\n    console.log(info);\r\n    try {\r\n      if (canonId) {\r\n        await axios.put(`/event/${canonId}`, payload);\r\n      } else {\r\n        await axios.post(`/event`, payload);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    setIsVisible(false);\r\n  }\r\n\r\n  function parseInfo(info) {\r\n    const timezoneOffset = new Date().getTimezoneOffset();\r\n    if (info.user) {\r\n      info.userId = info.user.id;\r\n      delete info.user;\r\n    }\r\n    info.title = info.title === \"\" ? \"no title\" : info.title;\r\n    info.attendees = info.attendees.map((a) => a.id);\r\n    info.datetimeStart = info.datetimeStart\r\n      .subtract(timezoneOffset, \"m\")\r\n      .millisecond(0)\r\n      .toJSON();\r\n    info.dateEnd =\r\n      info.dateEnd === null\r\n        ? null\r\n        : info.dateEnd.subtract(timezoneOffset, \"m\").millisecond(0).toJSON();\r\n    return info;\r\n  }\r\n\r\n  return { isVisible, eventInfo, openPopup, closePopup, okPopup };\r\n}\r\n\r\nfunction useAttendees(info, infoDispatch) {\r\n  const [attendees, setAttendees] = useState(info.attendees);\r\n  const [input, setInput] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n\r\n  async function addAttendee() {\r\n    if (attendees.some((attendee) => attendee.email === input)) {\r\n      setError(true);\r\n      return;\r\n    }\r\n    try {\r\n      const { data } = await axios.get(`/user/email/${input}`);\r\n      console.log(data);\r\n      setError(false);\r\n      const updatedAttendees = [...attendees, data];\r\n      setAttendees(updatedAttendees);\r\n      infoDispatch({ type: \"attendees\", value: updatedAttendees });\r\n    } catch (err) {\r\n      console.log(err);\r\n      setError(true);\r\n    } finally {\r\n      setInput(\"\");\r\n    }\r\n  }\r\n\r\n  function removeAttendee(email) {\r\n    let filtered = attendees.filter((attendee) => attendee.email !== email);\r\n    setAttendees(filtered);\r\n    infoDispatch({ type: \"attendees\", value: filtered });\r\n  }\r\n\r\n  return { attendees, input, error, setInput, addAttendee, removeAttendee };\r\n}\r\n","C:\\Programming\\Calendar\\client\\src\\event_info\\EventRepeat.js",[],{"ruleId":"165","replacedBy":"166"},{"ruleId":"167","replacedBy":"168"},{"ruleId":"169","severity":1,"message":"170","line":39,"column":6,"nodeType":"171","endLine":39,"endColumn":12,"suggestions":"172"},{"ruleId":"169","severity":1,"message":"173","line":150,"column":6,"nodeType":"171","endLine":150,"endColumn":8,"suggestions":"174"},{"ruleId":"175","severity":1,"message":"176","line":7,"column":8,"nodeType":"177","messageId":"178","endLine":7,"endColumn":13},{"ruleId":"175","severity":1,"message":"179","line":7,"column":17,"nodeType":"177","messageId":"178","endLine":7,"endColumn":25},{"ruleId":"169","severity":1,"message":"180","line":26,"column":6,"nodeType":"171","endLine":26,"endColumn":31,"suggestions":"181"},{"ruleId":"169","severity":1,"message":"182","line":136,"column":6,"nodeType":"171","endLine":136,"endColumn":25,"suggestions":"183"},{"ruleId":"169","severity":1,"message":"184","line":185,"column":6,"nodeType":"171","endLine":185,"endColumn":25,"suggestions":"185"},{"ruleId":"186","severity":1,"message":"187","line":8,"column":3,"nodeType":"188","messageId":"189","endLine":25,"endColumn":4},{"ruleId":"169","severity":1,"message":"190","line":80,"column":6,"nodeType":"171","endLine":80,"endColumn":25,"suggestions":"191"},{"ruleId":"169","severity":1,"message":"192","line":29,"column":6,"nodeType":"171","endLine":29,"endColumn":12,"suggestions":"193"},{"ruleId":"169","severity":1,"message":"194","line":63,"column":6,"nodeType":"171","endLine":63,"endColumn":8,"suggestions":"195"},{"ruleId":"169","severity":1,"message":"196","line":21,"column":6,"nodeType":"171","endLine":21,"endColumn":39,"suggestions":"197"},{"ruleId":"169","severity":1,"message":"198","line":21,"column":17,"nodeType":"199","endLine":21,"endColumn":38},{"ruleId":"186","severity":1,"message":"187","line":73,"column":3,"nodeType":"188","messageId":"189","endLine":94,"endColumn":4},{"ruleId":"186","severity":1,"message":"187","line":153,"column":3,"nodeType":"188","messageId":"189","endLine":164,"endColumn":4},{"ruleId":"200","severity":1,"message":"201","line":26,"column":60,"nodeType":"202","messageId":"203","endLine":26,"endColumn":62},{"ruleId":"186","severity":1,"message":"187","line":65,"column":5,"nodeType":"188","messageId":"189","endLine":75,"endColumn":6},{"ruleId":"186","severity":1,"message":"187","line":121,"column":3,"nodeType":"188","messageId":"189","endLine":148,"endColumn":4},{"ruleId":"186","severity":1,"message":"187","line":163,"column":3,"nodeType":"188","messageId":"189","endLine":189,"endColumn":4},{"ruleId":"186","severity":1,"message":"187","line":194,"column":3,"nodeType":"188","messageId":"189","endLine":215,"endColumn":4},{"ruleId":"169","severity":1,"message":"204","line":228,"column":6,"nodeType":"171","endLine":228,"endColumn":12,"suggestions":"205"},"no-native-reassign",["206"],"no-negated-in-lhs",["207"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'isAuthenticated' and 'userId'. Either include them or remove the dependency array.","ArrayExpression",["208"],"React Hook useEffect has a missing dependency: 'getRequests'. Either include it or remove the dependency array.",["209"],"no-unused-vars","'Popup' is defined but never used.","Identifier","unusedVar","'usePopup' is defined but never used.","React Hook useEffect has a missing dependency: 'props.date'. Either include it or remove the dependency array. If 'setEvents' needs the current value of 'props.date', you can also switch to useReducer instead of useState and read 'props.date' in the reducer.",["210"],"React Hook useEffect has missing dependencies: 'end' and 'start'. Either include them or remove the dependency array. If 'setAllDayEvents' needs the current value of 'start', you can also switch to useReducer instead of useState and read 'start' in the reducer.",["211"],"React Hook useEffect has a missing dependency: 'date'. Either include it or remove the dependency array. If 'setDayEvents' needs the current value of 'date', you can also switch to useReducer instead of useState and read 'date' in the reducer.",["212"],"default-case","Expected a default case.","SwitchStatement","missingDefaultCase","React Hook useEffect has missing dependencies: 'dates' and 'period'. Either include them or remove the dependency array. If 'setEvents' needs the current value of 'period', you can also switch to useReducer instead of useState and read 'period' in the reducer.",["213"],"React Hook useEffect has a missing dependency: 'incrementTime'. Either include it or remove the dependency array.",["214"],"React Hook useEffect has a missing dependency: 'userId'. Either include it or remove the dependency array.",["215"],"React Hook useEffect has missing dependencies: 'event' and 'userId'. Either include them or remove the dependency array. If 'setDuration' needs the current value of 'event', you can also switch to useReducer instead of useState and read 'event' in the reducer.",["216"],"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","CallExpression","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","React Hook useEffect has a missing dependency: 'eventInfo.title'. Either include it or remove the dependency array.",["217"],"no-global-assign","no-unsafe-negation",{"desc":"218","fix":"219"},{"desc":"220","fix":"221"},{"desc":"222","fix":"223"},{"desc":"224","fix":"225"},{"desc":"226","fix":"227"},{"desc":"228","fix":"229"},{"desc":"230","fix":"231"},{"desc":"232","fix":"233"},{"desc":"234","fix":"235"},{"desc":"236","fix":"237"},"Update the dependencies array to be: [isAuthenticated, user, userId]",{"range":"238","text":"239"},"Update the dependencies array to be: [getRequests]",{"range":"240","text":"241"},"Update the dependencies array to be: [props.calendars, props.date, update]",{"range":"242","text":"243"},"Update the dependencies array to be: [calendars, end, start, update]",{"range":"244","text":"245"},"Update the dependencies array to be: [calendars, date, update]",{"range":"246","text":"247"},"Update the dependencies array to be: [calendars, dates, period, update]",{"range":"248","text":"249"},"Update the dependencies array to be: [date, incrementTime]",{"range":"250","text":"251"},"Update the dependencies array to be: [userId]",{"range":"252","text":"253"},"Update the dependencies array to be: [datetime, event, userId]",{"range":"254","text":"255"},"Update the dependencies array to be: [eventInfo.title, open]",{"range":"256","text":"257"},[980,986],"[isAuthenticated, user, userId]",[3589,3591],"[getRequests]",[609,634],"[props.calendars, props.date, update]",[3122,3141],"[calendars, end, start, update]",[4541,4560],"[calendars, date, update]",[2052,2071],"[calendars, dates, period, update]",[775,781],"[date, incrementTime]",[1776,1778],"[userId]",[775,808],"[datetime, event, userId]",[6439,6445],"[eventInfo.title, open]"]